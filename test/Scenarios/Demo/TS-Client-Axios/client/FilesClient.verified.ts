// <auto-generated />
import { ApiClient } from './ApiClient';
import type { ApiResult } from '../types/ApiResult';
import type { FileAsFormDataRequest, FilesAsFormDataRequest } from '../models';

export class FilesClient {
  constructor(private readonly api: ApiClient) {}

  async getFileById(id: string): Promise<ApiResult<Blob>> {
    return this.api.request<Blob>('GET', `/files/${id}`, {
      responseType: 'blob',
    });
  }

  async uploadFormDataFile(data: { itemName?: string; file?: Blob | File; items?: string[] }): Promise<ApiResult<void>> {
    return this.api.request<void>('POST', '/files/form-data/singleObject', {
      body: (() => {
        const formData = new FormData();
        if (data.itemName != null) formData.append('itemName', String(data.itemName));
        if (data.file != null) formData.append('file', data.file);
        for (const item of data.items ?? []) formData.append('items', String(item));
        return formData;
      })(),
    });
  }

  async uploadFormDataFiles(data: { files?: (Blob | File)[] }): Promise<ApiResult<void>> {
    return this.api.request<void>('POST', '/files/form-data/singleObjectMultiFile', {
      body: (() => {
        const formData = new FormData();
        for (const f of data.files ?? []) formData.append('files', f);
        return formData;
      })(),
    });
  }

  async uploadSingleFileAsFormData(file: Blob | File): Promise<ApiResult<void>> {
    return this.api.request<void>('POST', '/files/form-data/singleFile', {
      body: file,
    });
  }

  async uploadMultiFilesAsFormData(files: (Blob | File)[]): Promise<ApiResult<void>> {
    return this.api.request<void>('POST', '/files/form-data/multiFile', {
      body: (() => {
        const formData = new FormData();
        for (const file of files) {
          formData.append('files', file);
        }
        return formData;
      })(),
    });
  }
}