// <auto-generated />
import { ApiClient } from './ApiClient';
import type { ApiResult } from '../types/ApiResult';
import type { CreateSubscriptionRequest, NotificationEvent, Subscription, Subscriptions } from '../models';
import type { NotificationType } from '../enums';

export class NotificationsClient {
  constructor(private readonly api: ApiClient) {}

  async listSubscriptions(): Promise<ApiResult<Subscriptions>> {
    return this.api.request<Subscriptions>('GET', '/notifications/subscriptions');
  }

  async createSubscription(body: CreateSubscriptionRequest): Promise<ApiResult<Subscription>> {
    return this.api.request<Subscription>('POST', '/notifications/subscriptions', {
      body,
    });
  }

  async getSubscriptionById(subscriptionId: string): Promise<ApiResult<Subscription>> {
    return this.api.request<Subscription>('GET', `/notifications/subscriptions/${subscriptionId}`);
  }

  async deleteSubscription(subscriptionId: string): Promise<ApiResult<void>> {
    return this.api.request<void>('DELETE', `/notifications/subscriptions/${subscriptionId}`);
  }

  async *listNotifications(query?: { topics?: string }, signal?: AbortSignal): AsyncGenerator<NotificationEvent> {
    yield* this.api.requestStream<NotificationEvent>('GET', '/notifications/stream', {
      query: {
        topics: query?.topics,
      },
      signal,
    });
  }
}