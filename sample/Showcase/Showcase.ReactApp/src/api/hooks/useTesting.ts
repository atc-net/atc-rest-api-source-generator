// <auto-generated />
import { useQuery } from '@tanstack/react-query';
import { useApiService } from './useApiService';
import { ApiError } from '../errors/ApiError';
import type { ExceptionTestResponse } from '../models';

const testingKeys = {
  all: ['testing'] as const,
  getExceptionTest: (code: number) => [...testingKeys.all, 'getExceptionTest', code] as const,
};

export { testingKeys };

export function useGetExceptionTest(code: number) {
  const api = useApiService();
  return useQuery({
    queryKey: testingKeys.getExceptionTest(code),
    queryFn: async () => {
      const result = await api.testing.getExceptionTest(code);
      if (result.status === 'ok' || result.status === 'created') {
        return result.data;
      }
      throw new ApiError(
        result.response.status,
        result.response.statusText,
        'error' in result ? result.error.message : 'Request failed',
        result.response,
      );
    },
    enabled: !!code,
  });
}