// <auto-generated />
import { useMutation, useQueryClient } from '@tanstack/react-query';
import { useApiService } from './useApiService';
import { ApiError } from '../errors/ApiError';
import type { FileAsFormDataRequest, FilesAsFormDataRequest } from '../models';

const filesKeys = {
  all: ['files'] as const,
};

export { filesKeys };

export function useGetFileById() {
  const api = useApiService();
  const queryClient = useQueryClient();
  return useMutation({
    mutationFn: async (id: string) => {
      const result = await api.files.getFileById(id);
      if (result.status === 'ok' || result.status === 'created') {
        return result.data;
      }
      throw new ApiError(
        result.response.status,
        result.response.statusText,
        'error' in result ? result.error.message : 'Request failed',
        result.response,
      );
    },
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: filesKeys.all });
    },
  });
}

export function useUploadSingleObjectWithFileAsFormData() {
  const api = useApiService();
  const queryClient = useQueryClient();
  return useMutation({
    mutationFn: async (data: { itemName?: string; file?: Blob | File; items?: string[] }) => {
      const result = await api.files.uploadSingleObjectWithFileAsFormData(data);
      if (result.status === 'noContent' || result.status === 'ok') {
        return;
      }
      throw new ApiError(
        result.response.status,
        result.response.statusText,
        'error' in result ? result.error.message : 'Request failed',
        result.response,
      );
    },
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: filesKeys.all });
    },
  });
}

export function useUploadSingleObjectWithFilesAsFormData() {
  const api = useApiService();
  const queryClient = useQueryClient();
  return useMutation({
    mutationFn: async (data: { files?: (Blob | File)[] }) => {
      const result = await api.files.uploadSingleObjectWithFilesAsFormData(data);
      if (result.status === 'noContent' || result.status === 'ok') {
        return;
      }
      throw new ApiError(
        result.response.status,
        result.response.statusText,
        'error' in result ? result.error.message : 'Request failed',
        result.response,
      );
    },
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: filesKeys.all });
    },
  });
}

export function useUploadSingleFileAsFormData() {
  const api = useApiService();
  const queryClient = useQueryClient();
  return useMutation({
    mutationFn: async (file: Blob | File) => {
      const result = await api.files.uploadSingleFileAsFormData(file);
      if (result.status === 'noContent' || result.status === 'ok') {
        return;
      }
      throw new ApiError(
        result.response.status,
        result.response.statusText,
        'error' in result ? result.error.message : 'Request failed',
        result.response,
      );
    },
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: filesKeys.all });
    },
  });
}

export function useUploadMultiFilesAsFormData() {
  const api = useApiService();
  const queryClient = useQueryClient();
  return useMutation({
    mutationFn: async (files: (Blob | File)[]) => {
      const result = await api.files.uploadMultiFilesAsFormData(files);
      if (result.status === 'noContent' || result.status === 'ok') {
        return;
      }
      throw new ApiError(
        result.response.status,
        result.response.statusText,
        'error' in result ? result.error.message : 'Request failed',
        result.response,
      );
    },
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: filesKeys.all });
    },
  });
}